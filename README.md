# XlogWriter
Log save storage scheme using xlog
使用Xlog的日志本地存储方案

## 背景
1.为定位问题需要在项目中集成日志本地存储的功能 
2.经过技术调研决定使用Tencent的xlog 
3.但是感觉不够灵活且缺少扩展 
4.由此展开了一个订制后的分享 

## 订制需求
1.去除压缩存储：默认存储为压缩，可选是否加密，但只有压缩也需要使用python解压后才能查看，dev阶段便于查看屏蔽压缩功能 
2.日志文件命名增加时间信息：日志文件命名格式为“头_日期_序号.xlog”；订制后为“头_日期-时分_序号.xlog” 
3.日志文件删除大量头信息 
4.每行日志删除格式化信息：默认格式为包含了时间信息、pid、tid等额外信息，过于冗长，删除后仅保留日志信息 
5.日志文件大小上限：默认上限仅在每次打开文件时才check，变成为每次写入都会check，保证不会所有日志文件不会超过限制 

## mars订制仓库
[链接](https://github.com/UncleQing/mars)


## Demo说明
1.直接运行Demo后进入设备文件目录下查看：内部存储设备/Android/data/com.example.xlogdemo/files/Log 
2.demo设置单个文件2kb，500ms写入一次，持续一段时间后Log下会有多份文件，每个大小2kb 
3.若需求和订制需求一致，可直接拷贝so以及tencent下api到自己项目中使用 
4.额外订制请参考mars订制仓库后进一步订制 

## 欢迎交流分享
